<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Librería Ecopedagógica Aguas Abajo</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Atkinson Hyperlegible', sans-serif; }
        header { background-image: url('aguas.jpg'); height: 200px; background-size: cover; background-position: center; color: white; text-align: center; padding: 40px; }
        footer { background-color: #333; color: white; padding: 10px; text-align: center; }
        .producto { display: flex; flex-direction: column; align-items: center; text-align: center; border: 1px solid #ccc; border-radius: 5px; padding: 10px; margin: 10px; box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.2); }
        .producto img { width: 100%; height: auto; max-width: 150px; }
        .carrito, .formulario { background: hsl(150, 30%, 80%); padding: 20px; margin-top: 20px; border-radius: 5px; text-align: right;}
        .formulario input, .formulario textarea { width: 100%; margin-bottom: 10px; }
        button { background-color: #333; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background-color: #555; }
    </style>
</head>

<body>
    <header>
        <h1>Librería Ecopedagógica Aguas Abajo</h1>
        <img src="agua_sabajo_logo.png" alt="Logo Librería" style="height: 100px;">
    </header>

    <!-- Carrito -->
    <div class="carrito container">
        <h2>Carrito de Compras</h2>
        <ul id="listaCarrito" class="list-unstyled"></ul>
        <p>Total: <span id="total">0</span> CLP</p>
        <button onclick="scrollToContacto()" class="btn btn-primary">Realizar pedido</button>
    </div>
<br>
    <!-- Productos -->
    <div id="productos" class="container">
        <div class="row">
            <!-- Productos -->
            <div class="col-md-4">
                <div class="producto">
                    <a href="catálogo/Ecología_y_medio_ambiente.html">
                        <img src="img/Ecología_y_medio_ambiente_cover.jpg" alt="Portada Ecología y medio ambiente">
                    </a>
                    <span>Ecología y medio ambiente<br> <strong>$10000</strong></span><br>
                    <button onclick="agregarAlCarrito('Ecología y medio ambiente', 10000)">Añadir</button>
                </div>
            </div>

            <div class="col-md-4">
                <div class="producto">
                    <a href="catálogo/Bibliodiversidad:_Un_manifiesto_para_las_editoriales_independientes.html">
                        <img src="img/Bibliodiversidad:_Un_manifiesto_para_las_editoriales_independientes_cover.jpg" alt="Portada Bibliodiversidad: Un manifiesto para las editoriales independientes">
                    </a>
                    <span>Bibliodiversidad: Un manifiesto para las editoriales independientes<br> <strong>$6000</strong></span><br>
                    <button onclick="agregarAlCarrito('Bibliodiversidad: Un manifiesto para las editoriales independientes', 6000)">Añadir</button>
                </div>
            </div>

            <div class="col-md-4">
                <div class="producto">
                    <a href="catálogo/Biblioteca_y_Vida.html">
                        <img src="img/Biblioteca_y_Vida_cover.jpg" alt="Portada Biblioteca y Vida">
                    </a>
                    <span>Biblioteca y Vida<br> <strong>$6000</strong></span><br>
                                        <button onclick="agregarAlCarrito('Biblioteca y Vida', 6000)">Añadir</button>
                </div>
            </div>

            <div class="col-md-4">
                <div class="producto">
                    <a href="catálogo/La_Antártica:_Ecología,_Recursos_y_Sustentabilidad.html">
                        <img src="img/La_Antártica:_Ecología,_Recursos_y_Sustentabilidad_cover.jpg" alt="Portada La Antártica: Ecología, Recursos y Sustentabilidad">
                    </a>
                    <span>La Antártica: Ecología, Recursos y Sustentabilidad<br> <strong>$4000</strong></span><br>
                    <button onclick="agregarAlCarrito('La Antártica: Ecología, Recursos y Sustentabilidad', 4000)">Añadir</button>
                </div>
            </div>

            <div class="col-md-4">
                <div class="producto">
                    <a href="catálogo/Las_cuevas_y_sus_habitantes.html">
                        <img src="img/Las_cuevas_y_sus_habitantes_cover.jpg" alt="Portada Las cuevas y sus habitantes">
                    </a>
                    <span>Las cuevas y sus habitantes<br> <strong>$6000</strong></span><br>
                    <button onclick="agregarAlCarrito('Las cuevas y sus habitantes', 6000)">Añadir</button>
                </div>
            </div>

            <div class="col-md-4">
                <div class="producto">
                    <a href="catálogo/Ecología_y_Evolución_de_interacciones_planta-animal.html">
                        <img src="img/Ecología_y_Evolución_de_interacciones_planta-animal_cover.jpg" alt="Portada Ecología y Evolución de interacciones planta-animal">
                    </a>
                    <span>Ecología y Evolución de interacciones planta-animal<br> <strong>$10000</strong></span><br>
                    <button onclick="agregarAlCarrito('Ecología y Evolución de interacciones planta-animal', 10000)">Añadir</button>
                </div>
            </div>

            <div class="col-md-4">
                <div class="producto">
                    <a href="catálogo/Radiografia_a_los_murciélagos_en_Chile.html">
                        <img src="img/Radiografia_a_los_murciélagos_en_Chile_cover.jpg" alt="Portada Radiografía a los murciélagos en Chile">
                    </a>
                    <span>Radiografía a los murciélagos en Chile<br> <strong>$6000</strong></span><br>
                    <button onclick="agregarAlCarrito('Radiografía a los murciélagos en Chile', 6000)">Añadir</button>
                </div>
            </div>

            <div class="col-md-4">
                <div class="producto">
                    <a href="catálogo/Mujeres_científicas_en_Chile.html">
                        <img src="img/Mujeres_científicas_en_Chile_cover.jpg" alt="Portada Mujeres científicas en Chile">
                    </a>
                    <span>Mujeres científicas en Chile<br> <strong>$8000</strong></span><br>
                    <button onclick="agregarAlCarrito('Mujeres científicas en Chile', 8000)">Añadir</button>
                </div>
            </div>

            <div class="col-md-4">
                <div class="producto">
                    <a href="catálogo/Tierra_en_Peligro.html">
                        <img src="img/Tierra_en_Peligro_cover.jpg" alt="Portada Tierra en Peligro">
                    </a>
                    <span>Tierra en Peligro<br> <strong>$10000</strong></span><br>
                    <button onclick="agregarAlCarrito('Tierra en Peligro', 10000)">Añadir</button>
                </div>
            </div>

            <div class="col-md-4">
                <div class="producto">
                    <a href="catálogo/El_Libro_de_la_Ecología.html">
                        <img src="img/El_Libro_de_la_Ecología_cover.jpg" alt="Portada El Libro de la Ecología">
                    </a>
                    <span>El Libro de la Ecología<br> <strong>$10000</strong></span><br>
                    <button onclick="agregarAlCarrito('El Libro de la Ecología', 100
                                        <button onclick="agregarAlCarrito('El Libro de la Ecología', 10000)">Añadir</button>
                </div>
            </div>

            <div class="col-md-4">
                <div class="producto">
                    <a href="catálogo/Biodiversidad_Para_Jovenes_Diversos.html">
                        <img src="img/Biodiversidad_Para_Jovenes_Diversos_cover.jpg" alt="Portada Biodiversidad Para Jóvenes Diversos">
                    </a>
                    <span>Biodiversidad Para Jóvenes Diversos<br> <strong>$8000</strong></span><br>
                    <button onclick="agregarAlCarrito('Biodiversidad Para Jóvenes Diversos', 8000)">Añadir</button>
                </div>
            </div>

            <div class="col-md-4">
                <div class="producto">
                    <a href="catálogo/Una_guía_para_la_enseñanza_de_la_historia_ambiental.html">
                        <img src="img/Una_guía_para_la_enseñanza_de_la_historia_ambiental_cover.jpg" alt="Portada Una guía para la enseñanza de la historia ambiental">
                    </a>
                    <span>Una guía para la enseñanza de la historia ambiental<br> <strong>$10000</strong></span><br>
                    <button onclick="agregarAlCarrito('Una guía para la enseñanza de la historia ambiental', 10000)">Añadir</button>
                </div>
            </div>
            <!-- FIN -->
        </div>
    </div>

    <!-- Formulario de Contacto -->
    <div id="contacto" class="container">
        <div class="formulario">
            <h2>Formulario de Contacto</h2>
            <form action="https://formsubmit.co/dcolleoniv@gmail.com" method="POST">
                <input type="hidden" name="_next" value="gracias.html">
                <input type="hidden" name="_captcha" value="false">
                <input type="hidden" name="carrito" id="carrito"> <!-- Campo oculto para el carrito -->
                <input type="hidden" id="totalPedido" name="totalPedido"> <!-- Campo oculto para el total -->
                
                <label for="nombre">Nombre:</label>
                <input type="text" id="nombre" name="nombre" required><br>

                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required><br>

                <label for="mensaje">Mensaje:</label><br>
                <textarea id="mensaje" name="mensaje" rows="4" required></textarea><br>

                <h3>Detalles del Pedido:</h3>
                <div id="detallesPedido"></div> <!-- Contenedor para mostrar los detalles del pedido -->
                <h3>Total: $<span id="totalVisible">0</span></h3>
                <button type="submit" class="btn btn-success">Enviar Pedido</button>
            </form>
        </div>
    </div>
<br>
    <!-- Footer -->
    <footer>
        <p>2025</p>
        <img src="agua_sabajo_logo.png" alt="Logo Librería" style="height: 100px;">
    </footer>

    <script>
        let carrito = [];
        let total = 0;

        function agregarAlCarrito(nombre, precio) {
            const itemExistente = carrito.find(item => item.nombre === nombre);
            
            if (itemExistente) {
                itemExistente.cantidad++;
                total += precio;
            } else {
                carrito.push({ nombre, precio, cantidad: 1 });
                total += precio;
            }
            actualizarCarrito();
        }

        function eliminarDelCarrito(nombre) {
            const itemIndex = carrito.findIndex(item => item.nombre === nombre);
            
            if (itemIndex !== -1) {
                if (carrito[itemIndex].cantidad > 1) {
                    carrito[itemIndex].cantidad--;
                    total -= carrito[itemIndex].precio;
                } else {
                    total -= carrito[itemIndex].precio;
                    carrito.splice(itemIndex, 1);
                }
                actualizarCarrito();
            }
        }
        
        function actualizarCarrito() {
            let lista = document.getElementById("listaCarrito");
            let totalElemento = document.getElementById("total");
            let detallesPedido = document.getElementById("detallesPedido");
            let totalVisible = document.getElementById("totalVisible");

            if (!lista || !totalElemento || !detallesPedido) {
                console.error("Elementos del carrito no encontrados.");
                return;
            }

                        lista.innerHTML = "";
            detallesPedido.innerHTML = ""; // Limpiar el contenedor de detalles del pedido

            carrito.forEach(item => {
                let li = document.createElement("li");
                li.textContent = `${item.nombre} - CLP ${item.precio} (Cantidad: ${item.cantidad}) `;
                
                let botonEliminar = document.createElement("button");
                botonEliminar.textContent = "Eliminar";
                botonEliminar.onclick = () => eliminarDelCarrito(item.nombre);
                li.appendChild(botonEliminar);
                
                lista.appendChild(li);

                // Agregar detalles al contenedor del formulario
                detallesPedido.innerHTML += `${item.nombre} - CLP ${item.precio} (Cantidad: ${item.cantidad})<br>`;
            });
            totalVisible.textContent = total; // Actualiza el total visible en el formulario
            totalElemento.textContent = total; // Actualiza el total en la interfaz

            // Actualizar el campo oculto del formulario con el contenido del carrito
            const carritoTexto = carrito.map(item => `${item.nombre} - CLP ${item.precio} (Cantidad: ${item.cantidad})`).join(', ');
            document.getElementById("carrito").value = carritoTexto;
            
            // Actualizar el campo oculto del total
            document.getElementById("totalPedido").value = total; 
        }

        function scrollToContacto() {
            const contactoDiv = document.getElementById('contacto');
            contactoDiv.scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>

                   
