<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Librería Ecopedagógica Aguas Abajo</title>
    <style>
        body { font-family: Atkinson Hyperlegible, sans-serif; margin: 20px; text-align: center; }
        header { background-color: #333; color: white; padding: 20px; }
        header img { height: 100px; }
        footer img { height: 100px; }
        .productos { display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .producto img { width: 150px; height: 200px; margin-right: 10px; cursor: pointer; }
        .carrito, .formulario {line-height: 1.5;text-align: right; margin-top: 20px; border-top: 2px solid #000; border-bottom: 2px solid #000; padding-bottom: 20px; padding-top: 10px; padding-right: 50px; padding-left: 50px; }
        footer { margin-top: 20px; background-color: #333; color: white; padding: 10px; }
        h1 {font-family: Atkinson Hyperlegible, sans-serif; margin: 20px; text-align: center; font-size: xx-large;}
        button { background-color: #333; color: white; padding: 10px 20px; border: none; cursor: pointer; border-radius: 5px; }
        button:hover { background-color: #555; }
    </style>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Banner con logo -->
    <header style="background-image: url('aguas.jpg'); height: 200px; background-size: cover; background-position: center;">
        <img src="agua_sabajo_logo.png" alt="Logo Librería">
        <h1>Librería Ecopedagógica</h1>
    </header>
    
    <!-- Carrito -->
    <div class="carrito">
        <h2>Carrito de Compras</h2>
        <ul style="list-style-type:none; line-height: 3; background: hsl(150, 30%, 80%); 
        padding: 20px;"id="listaCarrito"></ul>
        <p>Total: <h3>$<span id="total">0</span><h3></p>
        <button onclick="scrollToContacto()">Realizar pedido</button>
    </div>

    <!-- Productos -->
    <div id="productos">
	<div class="productos">	
		
	<style>

        .producto {
		flex: 1 1 calc(25% - 20px);
		display: flex;
        border: 1px solid #ccc;
        border-radius: 5px;
        flex-direction: column;
        justify-content: space-between;
        padding: 10px;
        margin: 10px;
        text-align: center;
        box-sizing: border-box;
    }
    .producto img {
        max-width: 100%; /* Asegura que la imagen no exceda el ancho del contenedor */
        height: auto;
    }

    .carrito{
		
	}
	</style>
	
	<!-- INICIO -->

        <div class="producto">
            <a href="catálogo/Ecología_y_medio_ambiente.html">
                <img src="img/Ecología_y_medio_ambiente.jpg" alt="Portada Ecología y medio ambiente" width="50" height="50">
            </a><br>
            <span>Ecología y medio ambiente<br> <strong>$10000</strong></span><br>
            <button onclick="agregarAlCarrito('Ecología y medio ambiente', 10000)">Añadir</button>
        </div>

    
        <div class="producto">
            <a href="catálogo/Bibliodiversidad:_Un_manifiesto_para_las_editoriales_independientes.html">
                <img src="img/Bibliodiversidad:_Un_manifiesto_para_las_editoriales_independientes.jpg" alt="Portada Bibliodiversidad: Un manifiesto para las editoriales independientes" width="50" height="50">
            </a><br>
            <span>Bibliodiversidad: Un manifiesto para las editoriales independientes<br> <strong>$6000</strong></span><br>
            <button onclick="agregarAlCarrito('Bibliodiversidad: Un manifiesto para las editoriales independientes', 6000)">Añadir</button>
        </div>

    
        <div class="producto">
            <a href="catálogo/Biblioteca_y_Vida_.html">
                <img src="img/Biblioteca_y_Vida_.jpg" alt="Portada Biblioteca y Vida " width="50" height="50">
            </a><br>
            <span>Biblioteca y Vida <br> <strong>$6000</strong></span><br>
            <button onclick="agregarAlCarrito('Biblioteca y Vida ', 6000)">Añadir</button>
        </div>

    
        <div class="producto">
            <a href="catálogo/La_Antártica:_Ecología,_Recursos_y_Sustentabilidad.html">
                <img src="img/La_Antártica:_Ecología,_Recursos_y_Sustentabilidad.jpg" alt="Portada La Antártica: Ecología, Recursos y Sustentabilidad" width="50" height="50">
            </a><br>
            <span>La Antártica: Ecología, Recursos y Sustentabilidad<br> <strong>$4000</strong></span><br>
            <button onclick="agregarAlCarrito('La Antártica: Ecología, Recursos y Sustentabilidad', 4000)">Añadir</button>
        </div>

    
        <div class="producto">
            <a href="catálogo/Las_cuevas_y_sus_habitantes.html">
                <img src="img/Las_cuevas_y_sus_habitantes.jpg" alt="Portada Las cuevas y sus habitantes" width="50" height="50">
            </a><br>
            <span>Las cuevas y sus habitantes<br> <strong>$6000</strong></span><br>
            <button onclick="agregarAlCarrito('Las cuevas y sus habitantes', 6000)">Añadir</button>
        </div>

    
        <div class="producto">
            <a href="catálogo/Ecología_y_Evolución_de_interacciones_planta-animal.html">
                <img src="img/Ecología_y_Evolución_de_interacciones_planta-animal.jpg" alt="Portada Ecología y Evolución de interacciones planta-animal" width="50" height="50">
            </a><br>
            <span>Ecología y Evolución de interacciones planta-animal<br> <strong>$10000</strong></span><br>
            <button onclick="agregarAlCarrito('Ecología y Evolución de interacciones planta-animal', 10000)">Añadir</button>
        </div>

    
        <div class="producto">
            <a href="catálogo/Radiografia_a_los_murciélagos_en_Chile.html">
                <img src="img/Radiografia_a_los_murciélagos_en_Chile.jpg" alt="Portada Radiografia a los murciélagos en Chile" width="50" height="50">
            </a><br>
            <span>Radiografia a los murciélagos en Chile<br> <strong>$6000</strong></span><br>
            <button onclick="agregarAlCarrito('Radiografia a los murciélagos en Chile', 6000)">Añadir</button>
        </div>

    
        <div class="producto">
            <a href="catálogo/Mujeres_científicas_en_Chile._.html">
                <img src="img/Mujeres_científicas_en_Chile._.jpg" alt="Portada Mujeres científicas en Chile. " width="50" height="50">
            </a><br>
            <span>Mujeres científicas en Chile. <br> <strong>$8000</strong></span><br>
            <button onclick="agregarAlCarrito('Mujeres científicas en Chile. ', 8000)">Añadir</button>
        </div>

    
        <div class="producto">
            <a href="catálogo/Tierra_en_Peligro_.html">
                <img src="img/Tierra_en_Peligro_.jpg" alt="Portada Tierra en Peligro " width="50" height="50">
            </a><br>
            <span>Tierra en Peligro <br> <strong>$10000</strong></span><br>
            <button onclick="agregarAlCarrito('Tierra en Peligro ', 10000)">Añadir</button>
        </div>

    
        <div class="producto">
            <a href="catálogo/El_Libro_de_la_Ecología.html">
                <img src="img/El_Libro_de_la_Ecología.jpg" alt="Portada El Libro de la Ecología" width="50" height="50">
            </a><br>
            <span>El Libro de la Ecología<br> <strong>$10000</strong></span><br>
            <button onclick="agregarAlCarrito('El Libro de la Ecología', 10000)">Añadir</button>
        </div>

    
        <div class="producto">
            <a href="catálogo/Biodiversidad_Para_Jovenes_Diversos.html">
                <img src="img/Biodiversidad_Para_Jovenes_Diversos.jpg" alt="Portada Biodiversidad Para Jovenes Diversos" width="50" height="50">
            </a><br>
            <span>Biodiversidad Para Jovenes Diversos<br> <strong>$8000</strong></span><br>
            <button onclick="agregarAlCarrito('Biodiversidad Para Jovenes Diversos', 8000)">Añadir</button>
        </div>

    
        <div class="producto">
            <a href="catálogo/Una_guía_para_la_enseñanza_de_la_historia_ambiental.html">
                <img src="img/Una_guía_para_la_enseñanza_de_la_historia_ambiental.jpg" alt="Portada Una guía para la enseñanza de la historia ambiental" width="50" height="50">
            </a><br>
            <span>Una guía para la enseñanza de la historia ambiental<br> <strong>$10000</strong></span><br>
            <button onclick="agregarAlCarrito('Una guía para la enseñanza de la historia ambiental', 10000)">Añadir</button>
        </div>

    <!-- FIN -->
    
	</div>

    <!-- Formulario de Contacto -->
<div id="contacto">
<div class="formulario">
    <h2>Formulario de Contacto</h2>
    <form action="https://formsubmit.co/dcolleoniv@gmail.com" method="POST">
        <input type="hidden" name="_next" value="gracias.html">
        <input type="hidden" name="_captcha" value="false">
        <input type="hidden" name="carrito" id="carrito"> <!-- Campo oculto para el carrito -->
		<input type="hidden" id="totalPedido" name="totalPedido"> <!-- Campo oculto para el total -->
		
        <label for="nombre">Nombre:</label>
        <input type="text" id="nombre" name="nombre" required><br><br>

        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required><br><br>

        <label for="mensaje">Mensaje:</label><br>
        <textarea id="mensaje" name="mensaje" rows="4" required></textarea><br><br>

        <h3>Detalles del Pedido:</h3>
        <div id="detallesPedido"></div> <!-- Contenedor para mostrar los detalles del pedido -->
		<h3>Total: $<span id="totalVisible">0</span></h3>
        <button type="submit">Enviar Pedido</button>
    </form>
</div>

    </div>

    <!-- Footer -->
    <footer>
        <p>2025</p>
        <img src="agua_sabajo_logo.png" alt="Logo Librería">
    </footer>
    
<script>
    let carrito = [];
    let total = 0;

    function agregarAlCarrito(nombre, precio) {
        const itemExistente = carrito.find(item => item.nombre === nombre);
        
        if (itemExistente) {
            itemExistente.cantidad++;
            total += precio;
        } else {
            carrito.push({ nombre, precio, cantidad: 1 });
            total += precio;
        }
        actualizarCarrito();
    }

    function eliminarDelCarrito(nombre) {
        const itemIndex = carrito.findIndex(item => item.nombre === nombre);
        
        if (itemIndex !== -1) {
            if (carrito[itemIndex].cantidad > 1) {
                carrito[itemIndex].cantidad--;
                total -= carrito[itemIndex].precio;
            } else {
                total -= carrito[itemIndex].precio;
                carrito.splice(itemIndex, 1);
            }
            actualizarCarrito();
        }
    }
    
    function actualizarCarrito() {
        let lista = document.getElementById("listaCarrito");
        let totalElemento = document.getElementById("total");
        let detallesPedido = document.getElementById("detallesPedido");
        let totalVisible = document.getElementById("totalVisible"); // Nuevo elemento para mostrar el total

        if (!lista || !totalElemento || !detallesPedido) {
            console.error("Elementos del carrito no encontrados.");
            return;
        }

        lista.innerHTML = "";
        detallesPedido.innerHTML = ""; // Limpiar el contenedor de detalles del pedido

        carrito.forEach(item => {
            let li = document.createElement("li");
            li.textContent = `${item.nombre} - ${item.precio} (Cantidad: ${item.cantidad})    `;
            
            let botonEliminar = document.createElement("button");
            botonEliminar.textContent = "Eliminar";
            botonEliminar.onclick = () => eliminarDelCarrito(item.nombre);
            li.appendChild(botonEliminar);
            
            lista.appendChild(li);

            // Agregar detalles al contenedor del formulario
            detallesPedido.innerHTML += `${item.nombre} - ${item.precio} (Cantidad: ${item.cantidad})<br>`;
        });
		totalVisible.textContent = total; // Actualiza el total visible en el formulario
        totalElemento.textContent = total; // Actualiza el total en la interfaz

        // Actualizar el campo oculto del formulario con el contenido del carrito en formato de texto
        const carritoTexto = carrito.map(item => `${item.nombre} - ${item.precio} (Cantidad: ${item.cantidad})`).join(', ');
        document.getElementById("carrito").value = carritoTexto;
        
        // Actualizar el campo oculto del total
		document.getElementById("totalPedido").value = total; 
}
</script>

<script>
        function scrollToContacto() {
            const contactoDiv = document.getElementById('contacto');
            contactoDiv.scrollIntoView({ behavior: 'smooth' });
        }
</script>

</body>
</html>
